<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><!-- hexo injector head_begin start -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@200;300;400;500;600;700;900&display=swap" rel="stylesheet">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WDZ4T0TNBX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag(' js', new Date());
  gtag('config', 'G-WDZ4T0TNBX');
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1556107858900989" crossorigin="anonymous"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WDZ4T0TNBX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WDZ4T0TNBX');
</script>

<!-- Reader Revenue Manager -->
<script async type="application/javascript"
src="https://news.google.com/swg/js/v1/swg-basic.js"></script>
<script>
(self.SWG_BASIC = self.SWG_BASIC || []).push( basicSubscriptions => {
basicSubscriptions.init({
type: "NewsArticle",
isPartOfType: ["Product"],
isPartOfProductId: "CAowhszUCw:openaccess",
clientOptions: { theme: "light", lang: "zh-TW" },
});
});
</script>
<!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>智能家居 EP5：Zigbee 設備參戰 | Hi 我劉昕</title><meta name="author" content="Shuai"><meta name="copyright" content="Shuai"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ok 來捋一下現在的進度： 現在我們有一台 HA 伺服器，拿到了米家設備的掌控權，並且把這些掌控權進一步橋接給了 Apple Home。 所以我們目前已經可以透過「HA 的網頁」、「Siri」跟「家庭 App」來控制設備了。 但是這樣少了一個很重要的控制方式——實體開關！如果每次都要拿起手機來操作或用喊的，其實不見得方便對吧？所以我們這篇要來加入 Zigbee 實體開關。  硬體需求 這部分我們會">
<meta property="og:type" content="article">
<meta property="og:title" content="智能家居 EP5：Zigbee 設備參戰">
<meta property="og:url" content="https://shuaixin.cc/HA-5-Zigbee/index.html">
<meta property="og:site_name" content="Hi 我劉昕">
<meta property="og:description" content="ok 來捋一下現在的進度： 現在我們有一台 HA 伺服器，拿到了米家設備的掌控權，並且把這些掌控權進一步橋接給了 Apple Home。 所以我們目前已經可以透過「HA 的網頁」、「Siri」跟「家庭 App」來控制設備了。 但是這樣少了一個很重要的控制方式——實體開關！如果每次都要拿起手機來操作或用喊的，其實不見得方便對吧？所以我們這篇要來加入 Zigbee 實體開關。  硬體需求 這部分我們會">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://shuaixin.cc/HA-5-Zigbee/mqtt_ha.png">
<meta property="article:published_time" content="2024-08-03T16:00:00.000Z">
<meta property="article:modified_time" content="2025-06-06T05:59:39.607Z">
<meta property="article:author" content="Shuai">
<meta property="article:tag" content="Home Assistant">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://shuaixin.cc/HA-5-Zigbee/mqtt_ha.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "智能家居 EP5：Zigbee 設備參戰",
  "url": "https://shuaixin.cc/HA-5-Zigbee/",
  "image": "https://shuaixin.cc/HA-5-Zigbee/mqtt_ha.png",
  "datePublished": "2024-08-03T16:00:00.000Z",
  "dateModified": "2025-06-06T05:59:39.607Z",
  "author": [
    {
      "@type": "Person",
      "name": "Shuai",
      "url": "https://shuaixin.cc"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://shuaixin.cc/HA-5-Zigbee/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '複製成功',
    error: '複製失敗',
    noSupport: '瀏覽器不支援'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '剛剛',
    min: '分鐘前',
    hour: '小時前',
    day: '天前',
    month: '個月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '載入更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '智能家居 EP5：Zigbee 設備參戰',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Hi 我劉昕" type="application/atom+xml">
</head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/HA-5-Zigbee/mqtt_ha.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Hi 我劉昕</span></a><a class="nav-page-title" href="/"><span class="site-name">智能家居 EP5：Zigbee 設備參戰</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首頁</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">智能家居 EP5：Zigbee 設備參戰</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2024-08-03T16:00:00.000Z" title="發表於 2024-08-04 00:00:00">2024-08-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2025-06-06T05:59:39.607Z" title="更新於 2025-06-06 13:59:39">2025-06-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/">智能家居</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">瀏覽量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>ok 來捋一下現在的進度：</p>
<p>現在我們有一台 HA 伺服器，拿到了米家設備的掌控權，並且把這些掌控權進一步橋接給了 Apple Home。</p>
<p>所以我們目前已經可以透過「HA 的網頁」、「Siri」跟「家庭 App」來控制設備了。</p>
<p>但是這樣少了一個很重要的控制方式——實體開關！如果每次都要拿起手機來操作或用喊的，其實不見得方便對吧？所以我們這篇要來加入 Zigbee 實體開關。</p>
<p><img src="/HA-5-Zigbee/mqtt_ha.png" alt="mqtt_ha"></p>
<h3 id="硬體需求">硬體需求</h3>
<p>這部分我們會需要支援 Zigbee 的設備，而我們用的方案是來自開源社群的 Zigbee2MQTT，所以可以到<a target="_blank" rel="noopener" href="https://www.zigbee2mqtt.io/supported-devices/">支援設備</a>挑挑看選選看（超多的！）。我們此篇以<a target="_blank" rel="noopener" href="https://www.zigbee2mqtt.io/devices/IH-K663.html">塗鴉無線開關</a>跟<a target="_blank" rel="noopener" href="https://www.zigbee2mqtt.io/devices/WXKG01LM.html#xiaomi-wxkg01lm">小米無線開關</a>為例，因為我們急需實體開關嘛。</p>
<p>再來我們會需要一個直接插在 HA 伺服器上的 Zigbee 協調器，我自己是用 <a target="_blank" rel="noopener" href="https://sonoff.tech/product/gateway-and-sensors/sonoff-zigbee-3-0-usb-dongle-plus-p/">SONOFF Zigbee 3.0 USB Dongle Plus-P</a>，大家可以根據<a target="_blank" rel="noopener" href="https://www.zigbee2mqtt.io/guide/adapters/">支援的協調器</a>做選擇。</p>
<h3 id="安裝-Mosquitto-Broker">安裝 Mosquitto Broker</h3>
<p>附加元件（都 EP5 了我就不慢慢帶咯）搜尋並安裝 Mosquitto Broker，並直接啟用：</p>
<p><img src="/HA-5-Zigbee/HA-mosquitto.jpg" alt="HA-mosquitto"></p>
<p>這步驟就完成了。</p>
<p>啊這是做什麼用的？MQTT 是一種設備之間的溝通協議，我們等等的 Zigbee 設備的互相交流都要通過這個協議，所以理當我們的伺服器也要先裝好 MQTT 的溝通原則咯。</p>
<h3 id="安裝-Zigbee2MQTT">安裝 Zigbee2MQTT</h3>
<p>側邊欄「設定」→「附加元件」→ 右上角三點「儲存機制」：</p>
<p>我們新增一個儲存庫進去：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/zigbee2mqtt/hassio-zigbee2mqtt</span><br></pre></td></tr></table></figure>
<p><img src="/HA-5-Zigbee/HA-addurl.jpg" alt="HA-addurl"></p>
<p>如此一來，我們的附加元件商店就能找到我們要的 Zigbee2MQTT 咯：</p>
<p><img src="/HA-5-Zigbee/HA-zigbee2.jpg" alt="HA-zigbee2"></p>
<p>我們安裝它，但不用啟動。</p>
<p>我們先到「設定」→「系統」→「硬體」→「所有硬體」裡面找我們的協調器：</p>
<p><img src="/HA-5-Zigbee/HA-address.jpg" alt="HA-address"></p>
<p>以我們這邊為例就是 ttyUSB0。</p>
<p>接著我們回到附加元件，進去 Zigbee2MQTT 的設定處。其中我們只更改 mqtt 跟 serial 兩處。</p>
<p>mqtt 填入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server: mqtt://core-mosquitto</span><br><span class="line">user: 你的HA用戶名</span><br><span class="line">password: 你的HA密碼</span><br></pre></td></tr></table></figure>
<p>serial 填入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">port: /dev/剛剛硬體那邊看到的位置</span><br></pre></td></tr></table></figure>
<p><img src="/HA-5-Zigbee/HA-zigbee2setting.png" alt="HA-zigbee2setting"></p>
<p>儲存後，啟動 Zigbee2MQTT。</p>
<h3 id="加入-Zigbee-設備">加入 Zigbee 設備</h3>
<p>成功開啟後，我們就能看到空空的裝置清單了：</p>
<p><img src="/HA-5-Zigbee/HA-zig2.jpg" alt="HA-zig2"></p>
<p>點擊「允許裝置加入」，開始拿起你的設備進行連接吧！以這邊為例，塗鴉開關只要長按五秒，但小米開關要拆開來插洞洞，有夠麻煩的啦（而且每次都要翻找我的退卡針）。</p>
<p>加入完成：</p>
<p><img src="/HA-5-Zigbee/HA-zigdevice.jpg" alt="HA-zigdevice"></p>
<p>可以從線路圖裡看到各個設備的連接關係：</p>
<p><img src="/HA-5-Zigbee/HA-route.png" alt="HA-route"></p>
<p>Very good！開關成功參戰，我們下一篇就來讓開關控制我們的設備吧 :)</p>
<hr>
<p>補一個後來更熱鬧後的拓撲：</p>
<p><img src="/HA-5-Zigbee/image-20250606135650379.png" alt="image-20250606135650379"></p>
<p>可以看到，Zigbee 的一個好處就是，當有人發現訊號不太穩定時，會自動去找更近的 router 來連線。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://shuaixin.cc">Shuai</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章連結: </span><span class="post-copyright-info"><a href="https://shuaixin.cc/HA-5-Zigbee/">https://shuaixin.cc/HA-5-Zigbee/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 授權協議。轉載請註明來源 <a href="https://shuaixin.cc" target="_blank">Hi 我劉昕</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Home-Assistant/">Home Assistant</a></div><div class="post-share"><div class="social-share" data-image="/HA-5-Zigbee/mqtt_ha.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/HA-6-Automation/" title="智能家居 EP6：設定自動化"><img class="cover" src="/HA-6-Automation/HA-auto.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">智能家居 EP6：設定自動化</div></div><div class="info-2"><div class="info-item-1">上一篇我們把無線開關納入 HA 版圖了，但這些開關目前還沒有任何的控制功能。我們這邊就要來透過自動化，去指定開關對應到的動作。 設定自動化 側邊欄「設定」→「自動化與場景」→ 右下角「新增自動化」：  我們在「新增一個觸發」中選擇「裝置」，並選擇到我們的無線開關。以我這邊為例，我選擇了塗鴉開關（而這個開關就黏在我的電腦桌正下方，我手可以直接摸下去操作）：  無線開關最基本的觸發方式不外乎就是「單擊」跟「雙擊」，我們可以分別指定做不同的用途，而我這邊則是設定「單擊」就幫我「切換」燈。 這邊注意我們不太會設定成「開啟」或是「關閉」，畢竟開關有不同的操作方式也是蠻奇怪的對吧：  如此，我的這個工作燈不僅可以透過 HA 控制、從家庭 App 控制、喊 siri 控制，現在還有一個實體的無線按鈕可以控制了。 接著我指定同一個開關的「雙擊」控制我的小米插座：  而我的插座接的是書櫃的燈條，作為氣氛燈。當然，你可以接上任何你想接的設備。 好了，我們下篇見 :) </div></div></div></a><a class="pagination-related" href="/HA-4-HomeKit/" title="智能家居 EP4：給 Siri 控制權！"><img class="cover" src="/HA-4-HomeKit/HA-homekit.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">智能家居 EP4：給 Siri 控制權！</div></div><div class="info-2"><div class="info-item-1">目前為止，我們已經把一些基礎設備加進 HA。 現在我們要把這些設備進一步導入到 Apple Home 裡面，如此一來我們家 Siri 就可以控制這些設備了！ 安裝 HomeKit Bridge 這部分就沒有 HACS 的戲份了，因為 HA 官方有提供這個功能。 其中的邏輯就是，我們讓我們的 HA OS 伺服器充當橋接器，把 HA 連接到的所有設備導入到 Apple Home 裡面。 從側邊欄「設定」→「裝置與服務」→ 右下角「新增整合」→ 搜尋 homekit 並選擇「HomeKit Bridge」：  按照引導安裝即可。 接著，我們會發現側邊欄「通知提示」跳了新通知，點進去會發現它幫我們生成了橋接器的 QR code：  此時拿起你的 ios 設備，打開你的家庭 app，透過掃描加入配件：  成功後，Home 會把橋接器連接的所有設備一個一個讓你導入家中，如果你有很多設備的話，會花一陣子，耐心！ 設定完成後，設備就都進來咯：  此時就可以透過 Siri 操控設備咯！ </div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相關推薦</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/HA-6-Automation/" title="智能家居 EP6：設定自動化"><img class="cover" src="/HA-6-Automation/HA-auto.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-05</div><div class="info-item-2">智能家居 EP6：設定自動化</div></div><div class="info-2"><div class="info-item-1">上一篇我們把無線開關納入 HA 版圖了，但這些開關目前還沒有任何的控制功能。我們這邊就要來透過自動化，去指定開關對應到的動作。 設定自動化 側邊欄「設定」→「自動化與場景」→ 右下角「新增自動化」：  我們在「新增一個觸發」中選擇「裝置」，並選擇到我們的無線開關。以我這邊為例，我選擇了塗鴉開關（而這個開關就黏在我的電腦桌正下方，我手可以直接摸下去操作）：  無線開關最基本的觸發方式不外乎就是「單擊」跟「雙擊」，我們可以分別指定做不同的用途，而我這邊則是設定「單擊」就幫我「切換」燈。 這邊注意我們不太會設定成「開啟」或是「關閉」，畢竟開關有不同的操作方式也是蠻奇怪的對吧：  如此，我的這個工作燈不僅可以透過 HA 控制、從家庭 App 控制、喊 siri 控制，現在還有一個實體的無線按鈕可以控制了。 接著我指定同一個開關的「雙擊」控制我的小米插座：  而我的插座接的是書櫃的燈條，作為氣氛燈。當然，你可以接上任何你想接的設備。 好了，我們下篇見 :) </div></div></div></a><a class="pagination-related" href="/HA-2-HACS/" title="智能家居 EP2：安裝 HACS"><img class="cover" src="/HA-2-HACS/HA-ssh-1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-01</div><div class="info-item-2">智能家居 EP2：安裝 HACS</div></div><div class="info-2"><div class="info-item-1">為何安裝 HACS HACS 全名 Home Assistant Community Store，沒錯，社群的力量無限大。 為了後續我們要把米家裝置連進 HA、Zigbee 連進 HA、裝置們橋接進 Apple Home，我們就要依靠這個 HACS 裡面社群們開發的插件。 另外，HACS 的安裝流程中會需要 github 帳號，還請先準備好。 安裝 Terminal &amp; SSH 在安裝 HACS 前，我們要先安裝 Terminal &amp; SSH。 進入附加元件商店：  搜尋 SSH，然後你會發現沒有我們要的元件，所以我們要開啟進階模式：  開啟後就找得到了，咱們安裝它：  安裝完畢後開啟，可以看到如下畫面：  實際上這個畫面呢，你如果把伺服器連一個螢幕出來，也是同一個畫面哦！ 聰明的你可能發現了，如果我們給伺服器來一套鍵盤跟顯示器，我們這步 Terminal &amp; SSH 的安裝其實可以跳過啦。 安裝 HACS 好了，現在我們可以直接對伺服器下指令了。 我們此時輸入：  wget -O - https://get.hacs.xyz | bash -  並 en...</div></div></div></a><a class="pagination-related" href="/HA-3-miot/" title="智能家居 EP3：將小米裝置加入 HA"><img class="cover" src="/HA-3-miot/HA-mi.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-02</div><div class="info-item-2">智能家居 EP3：將小米裝置加入 HA</div></div><div class="info-2"><div class="info-item-1"> 如果你手上沒有小米設備可以跳過此篇，先去 EP5 添加 Zigbee 設備是個不錯的開始  安裝 Xiaomi Miot 我們上篇已經弄出了 HACS，現在我們就要來發揮它的妙用啦！ 在 HACS 中找到「Xiaomi Miot Auto」，把它下載下來：  接著到側邊欄「設定」→「裝置與服務」→ 右下角「新增整合」→ 找到我們剛剛下載下來的「Xiaomi Miot Auto」：  開始根據引導安裝。有特別需求的可採取局域網集成，但各位已經在用米家智能產品的用戶應該都有帳號，不妨直接透過帳號導入即可：  如此一來，你米家的設備就自動導入 HA 咯：   如此一來我們就能從 HA 控制我們的米家設備了！ 後續新增小米裝置 此例中，我又多買了一個米家智慧空氣循環扇，我們來一起添加它。 首先當然是將設備先按照官方正常方法接入米家 app，接下來我們才能在 HA 中找到它。 接入米家後，我們到「裝置與服務」的「整合」中找到 Xiaomi Miot Auto。  進去後選擇新增條目：  這裡因為我們只要單獨新增一個設備，所以選擇 include：  找到我們的設備：  添加後若沒有看到生...</div></div></div></a><a class="pagination-related" href="/HA-8-Circadian-Light/" title="智能家居 EP8：讓燈光隨著晝夜節律改變色溫"><img class="cover" src="/HA-8-Circadian-Light/Adaptive_Lighting_0007.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-16</div><div class="info-item-2">智能家居 EP8：讓燈光隨著晝夜節律改變色溫</div></div><div class="info-2"><div class="info-item-1">如何讓家裡的燈光色溫與自然的晝夜節律同步呢？此篇就來實作！  本來這個需求我們選用了 hass-circadian_lighting 的方案，但必須操作 configuration.yaml。 後來發現了 adaptive-lighting，可以純粹用圖形界面就搞定，那我們從善如流咯！  下載位置 首先在 HACS 中搜尋「Adaptive Lighting」，找到並點擊：  就是這傢伙，咱們選擇下載：  撰文當下版本為 v1.25.0：  安裝設定 下載後，到「設定 &gt; 裝置與整合」中搜尋我們的 Adaptive Lighting：  點擊設定：  找到我們要套用的燈具：  進行細節調整：  此處我將最低色溫調整到 3000，因為再暖就真的太紅了，我個人不太適應。而最低亮度我也沒給太低，不然能見度真的快看不到了。 如此一來，我們的燈光就自動與目前的晝夜節律同步咯 :) </div></div></div></a><a class="pagination-related" href="/HA-4-HomeKit/" title="智能家居 EP4：給 Siri 控制權！"><img class="cover" src="/HA-4-HomeKit/HA-homekit.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-03</div><div class="info-item-2">智能家居 EP4：給 Siri 控制權！</div></div><div class="info-2"><div class="info-item-1">目前為止，我們已經把一些基礎設備加進 HA。 現在我們要把這些設備進一步導入到 Apple Home 裡面，如此一來我們家 Siri 就可以控制這些設備了！ 安裝 HomeKit Bridge 這部分就沒有 HACS 的戲份了，因為 HA 官方有提供這個功能。 其中的邏輯就是，我們讓我們的 HA OS 伺服器充當橋接器，把 HA 連接到的所有設備導入到 Apple Home 裡面。 從側邊欄「設定」→「裝置與服務」→ 右下角「新增整合」→ 搜尋 homekit 並選擇「HomeKit Bridge」：  按照引導安裝即可。 接著，我們會發現側邊欄「通知提示」跳了新通知，點進去會發現它幫我們生成了橋接器的 QR code：  此時拿起你的 ios 設備，打開你的家庭 app，透過掃描加入配件：  成功後，Home 會把橋接器連接的所有設備一個一個讓你導入家中，如果你有很多設備的話，會花一陣子，耐心！ 設定完成後，設備就都進來咯：  此時就可以透過 Siri 操控設備咯！ </div></div></div></a><a class="pagination-related" href="/Home-Assistant-On-Mac/" title="在 Mac 上安裝 Home Assistant"><img class="cover" src="/Home-Assistant-On-Mac/4.PNG" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-15</div><div class="info-item-2">在 Mac 上安裝 Home Assistant</div></div><div class="info-2"><div class="info-item-1">用什麼來跑 Home Assistant 呢？ 為了把小米的設備整合到 Apple 家庭之內，我也來搗鼓 Home Assistant 了。 本來想買個樹莓派，用 docker 裝 Home Assistant 來玩，好處是同一台樹莓派可以同時拿來玩個 NAS 之類的，而且畢竟作為伺服器必須全年無休，功耗也是樹莓派較為理想。但後來冷靜下來，還是先拿閒置的 2015 MacBook Pro 來玩吧，免得我三分鐘熱度，世界上又將再多出一個被遺忘的算力……（看向被我關在抽屜裡的好幾塊 Arduino） 嗯，如果接下來 Home Assistant 順利融入我的生活，也許可以先淘一塊香橙派當個過渡，後續再視情形升級成樹莓派咯？ 我的設備  安裝方法 無他，Virtual Box 爾。但看到了 Home Assistant 官方寫：  Please keep in mind that the bridged adapter only functions over a hardwired Ethernet connection. Using Wi-Fi on your VirtualBox ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Shuai</div><div class="author-info-description">劉昕的部落格</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">160</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">249</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E9%AB%94%E9%9C%80%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">硬體需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D-Mosquitto-Broker"><span class="toc-number">2.</span> <span class="toc-text">安裝 Mosquitto Broker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%9D-Zigbee2MQTT"><span class="toc-number">3.</span> <span class="toc-text">安裝 Zigbee2MQTT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5-Zigbee-%E8%A8%AD%E5%82%99"><span class="toc-number">4.</span> <span class="toc-text">加入 Zigbee 設備</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/System-Thinking-in-Daily-Life/" title="讀書筆記：《佛畏系統》"><img src="/System-Thinking-in-Daily-Life/foweixitong.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="讀書筆記：《佛畏系統》"/></a><div class="content"><a class="title" href="/System-Thinking-in-Daily-Life/" title="讀書筆記：《佛畏系統》">讀書筆記：《佛畏系統》</a><time datetime="2025-11-15T16:00:00.000Z" title="發表於 2025-11-16 00:00:00">2025-11-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/immich-move-to-ssd/" title="Docker 更換掛載點：將 immich 資料搬遷到外接 SSD">Docker 更換掛載點：將 immich 資料搬遷到外接 SSD</a><time datetime="2025-11-05T16:00:00.000Z" title="發表於 2025-11-06 00:00:00">2025-11-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/TMS-NTP-Windows/" title="在 Windows 系統上架設 NTP 伺服器">在 Windows 系統上架設 NTP 伺服器</a><time datetime="2025-10-15T16:00:00.000Z" title="發表於 2025-10-16 00:00:00">2025-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/The-Psychology-of-Money/" title="讀書筆記：《致富心態》（金錢心理學）"><img src="/The-Psychology-of-Money/zhifuxintai.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="讀書筆記：《致富心態》（金錢心理學）"/></a><div class="content"><a class="title" href="/The-Psychology-of-Money/" title="讀書筆記：《致富心態》（金錢心理學）">讀書筆記：《致富心態》（金錢心理學）</a><time datetime="2025-10-11T16:00:00.000Z" title="發表於 2025-10-12 00:00:00">2025-10-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/BrightSign-GPIO/" title="透過 GPIO 來控制 BrightSign 播放器">透過 GPIO 來控制 BrightSign 播放器</a><time datetime="2025-10-06T16:00:00.000Z" title="發表於 2025-10-07 00:00:00">2025-10-07</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Shuai</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日夜模式切換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到頂端"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>